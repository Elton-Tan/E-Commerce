<div class="container">
    <div id="errr" style="display: none;" class="row">
        <div class="col">
            <div class="alert alert-danger">Dress design may take an extra 2 weeks as we are low on this material and
                will require a restock</div>
        </div>
    </div>
    <div class="row">
        <h4>Enter Your Measurements</h4>
        <div class="col-6 col-sm-4 col-md-4" style=" margin-top:2em;margin-left:50px">
            <label>Enter your Height</label><br />
            <input id="height" type="text" class="form-control" size="0.5"
                style='Height:2em; width:60%; margin-top:10px'>
            <label>Enter your Weight</label><br />
            <input id="weight" type="text" class="form-control" size="0.5"
                style='Height:2em; width:60%; margin-top:10px'>
            <label>Select Your Chest Size</label><br />
            <select onchange="updateChest()" id="chest" class="form-control" size="0.5"
                style='Height:2em; width:60%; margin-top:10px'>
                <option value="AA">AA</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select>
            <label>Enter Band Size For Bust</label><br />
            <table style="width:60%">
                <tr>
                    <td><button onclick="addb('bandsize')" type="button" style="width:20px;margin-top:7px">+</button>
                    </td>
                    <td style="padding:5px"><input id="bandsize" onchange="band()" type="number" class="form-control"
                            size="0.5" style='Height:2em; width:100%; margin-top:10px; float:left' value="0"></td>
                    <td><button onclick="subb('bandsize')" type="button" style="width:20px;margin-top:7px">-</button>
                    </td>
                </tr>
            </table>
            <div style="width:60%">
                <button type="button" onclick="calculateSize()"
                    style="float:right;width:130px;height:2.3em;margin-top:10px">Calculate
                    Size</button>
            </div>
        </div>

        <div class='col'>
            <div style=" text-align:center; left:-100px;">
                <h1 hidden='true' id='actualprice'>{{productData.Price}}</h1>
                <span id='brandName'>{{productData.Brand}}</span><br>
                <h3><span>{{productData.Name}}</span></h3>
                <p class="">$<strong id="price1" class="red">
                        {{productData.Price}}
                    </strong></p>
            </div>
            <h5>Estimated Size For</h5>
            <div class="row" style="margin-top:1em">
                <div class="col">
                    <label>Dress Length</label><br />
                    <table style="width:90%">
                        <tr>
                            <td><button onclick="add('dresslength')" type="button"
                                    style="width:20px;margin-top:7px">+</button>
                            </td>
                            <td style="padding:5px"><input id="dresslength" type="number" class="form-control"
                                    size="0.5" style='Height:2em; width:100%; margin-top:10px; float:left' value="0">
                            </td>
                            <td><button onclick="sub('dresslength')" type="button"
                                    style="width:20px;margin-top:7px">-</button>
                            </td>
                        </tr>
                    </table>
                    <label>Bust Measurement</label><br />
                    <table style="width:90%">
                        <tr>
                            <td><button onclick="addb('bustmeasurement')" type="button"
                                    style="width:20px;margin-top:7px">+</button>
                            </td>
                            <td style="padding:5px"><input id="bustmeasurement" onchange="burst()" class="form-control"
                                    size="0.5" style='Height:2em; width:100%; margin-top:10px; float:left' value="0AA">
                            </td>
                            <td><button onclick="subb('bustmeasurement')" type="button"
                                    style="width:20px;margin-top:7px">-</button>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col">
                    <label>Waist</label><br />
                    <table style="width:90%">
                        <tr>
                            <td><button onclick="add('waist')" type="button"
                                    style="width:20px;margin-top:7px">+</button>
                            </td>
                            <td style="padding:5px"><input id="waist" type="number" class="form-control" size="0.5"
                                    style='Height:2em; width:100%; margin-top:10px; float:left' value="0">
                            </td>
                            <td><button onclick="sub('waist')" type="button"
                                    style="width:20px;margin-top:7px">-</button>
                            </td>
                        </tr>
                    </table>
                    <label>Shoulder Width</label><br />
                    <table style="width:90%">
                        <tr>
                            <td><button onclick="add('shoulderwidth')" type="button"
                                    style="width:20px;margin-top:7px">+</button>
                            </td>
                            <td style="padding:5px"><input id="shoulderwidth" type="number" class="form-control"
                                    size="0.5" style='Height:2em; width:100%; margin-top:10px; float:left' value="0">
                            </td>
                            <td><button onclick="sub('shoulderwidth')" type="button"
                                    style="width:20px;margin-top:7px">-</button>
                            </td>
                        </tr>
                    </table>
                    <div style="float:right;padding-right:10%">
                        <label style="float:right" for="usemeasurement">Use these measurement</label>
                        <input style="float:right;margin-top:7px;margin-right:2px" type="checkbox"
                            id="usemeasurement" />
                        <button onclick="returntoproduct()"
                            style="width:150px;height:2em;float:right;margin-top:20px">Return to Product</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>


<script>
    function add(id) {
        const value = document.getElementById(id).value;
        if (value === '') {
            document.getElementById(id).value = '0';
        } else {
            document.getElementById(id).value = parseInt(value) + 1;
        }
    }
    function addb(id) {
        const value = parseInt(document.getElementById('bustmeasurement').value);
        const chest = document.getElementById('chest').value;
        document.getElementById('bustmeasurement').value = (value + 1) + chest;
        document.getElementById('bandsize').value = (value + 1);
    }
    function band() {
        const value = parseInt(document.getElementById('bandsize').value);
        const chest = document.getElementById('chest').value;
        document.getElementById('bustmeasurement').value = value + chest;
    }
    function burst() {
        document.getElementById('bandsize').value = parseInt(document.getElementById('bustmeasurement').value);
    }
    function sub(id) {
        const value = document.getElementById(id).value;
        if (value === '') {
            document.getElementById(id).value = '0';
        } else {
            document.getElementById(id).value = (parseInt(value) - 1) < 0 ? 0 : (parseInt(value) - 1);
        }
    }
    function subb(id) {
        const value = parseInt(document.getElementById('bustmeasurement').value);
        const chest = document.getElementById('chest').value;
        if ((value - 1) < 0) {
            document.getElementById('bustmeasurement').value = '0' + chest;
            document.getElementById('bandsize').value = '0';
        } else {
            document.getElementById('bustmeasurement').value = (value - 1) + chest;
            document.getElementById('bandsize').value = (value - 1);
        }
    }
    function updateChest() {
        const chest = document.getElementById('chest').value;
        document.getElementById('bustmeasurement').value = parseInt(document.getElementById('bustmeasurement').value) + chest;
    }
    function calculateSize() {
        const brand = document.getElementById('brandName').innerHTML;
        const hieght = (document.getElementById('height').value);
        const weight = (document.getElementById('weight').value);
        const bandsize = (document.getElementById('bandsize').value);
        if (hieght === '') {
            alert("Please Enter Height!");
        } else if (weight === '') {
            alert("Please Enter Weight!");
        } else if (bandsize === '') {
            alert("Please Enter Band Size for Bust!");
        } else {
            document.getElementById('dresslength').value = (brand === 'Classic Dress') ? Math.round(0.4 * parseInt(hieght) * 100) / 100 : Math.round(0.6 * parseInt(hieght) * 100) / 100;
            document.getElementById('waist').value = Math.round((parseInt(weight) / parseInt(hieght)) * 140 * 100) / 100;
            document.getElementById('shoulderwidth').value = Math.round(1.4 * parseFloat(document.getElementById('waist').value) * 100) / 100;
        }
    }
    function returntoproduct() {
        const usemeasurement = document.getElementById('usemeasurement').checked;
        if (usemeasurement === false) {
            location.href = `/products/{{productData.id}}`;
        } else {
            const length = document.getElementById('dresslength').value;
            const waist = document.getElementById('waist').value;
            const bust = document.getElementById('bustmeasurement').value;
            const shoulder = document.getElementById('shoulderwidth').value;
            $.ajax({
                type: 'POST',
                url: '/api/enablemeasurement',
                contentType: 'application/json',
                data: JSON.stringify({ length: length, waist: waist, bust: bust, shoulder: shoulder }),
                success: function (data) {
                    if (data.success === true) {
                        location.href = `/products/{{productData.id}}`;
                    } else {
                        alert("Unknown Error!");
                    }
                }
            });
        }
    }
</script>